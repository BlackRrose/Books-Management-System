<form [formGroup]="bookForm" (ngSubmit)="onSubmit()" class="needs-validation" novalidate>
  <div class="mb-3" *ngFor="let field of ['title', 'author', 'isbn', 'price', 'publishedDate', 'description']">
    <label [for]="field" class="form-label">{{ field | titlecase }}</label>
    
    <ng-container [ngSwitch]="field">
      <input [required]="true"
        *ngSwitchCase="'price'"
        type="number"
        step="0.01"
        min="0"
        class="form-control"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      />

      <input
        *ngSwitchCase="'publishedDate'"
        type="date"
        class="form-control"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      />

      <textarea
        *ngSwitchCase="'description'"
        class="form-control"
        rows="3"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      ></textarea>

      <input required="true"
        *ngSwitchDefault
        type="text"
        class="form-control"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      />
    </ng-container>

    <div class="invalid-feedback">
      {{ field | titlecase }} is required and must be valid.
    </div>
  </div>

  <button type="submit" [disabled]="!bookForm.valid" class="btn btn-primary">Submit</button>
</form>

<!-- Toast Container -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div
    class="toast align-items-center text-bg-success border-0"
    role="alert"
    [class.show]="showSuccessToast"
    aria-live="assertive"
    aria-atomic="true"
  >
    <div class="d-flex">
      <div class="toast-body">
        Book saved successfully!
      </div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        (click)="showSuccessToast = false"
      ></button>
    </div>
  </div>

  <div
    class="toast align-items-center text-bg-danger border-0"
    role="alert"
    [class.show]="showErrorToast"
    aria-live="assertive"
    aria-atomic="true"
  >
    <div class="d-flex">
      <div class="toast-body">
        Failed to save book.
      </div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        (click)="showErrorToast = false"
      ></button>
    </div>
  </div>
</div>



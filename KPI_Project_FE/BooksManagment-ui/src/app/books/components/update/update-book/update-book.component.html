<form [formGroup]="bookForm" (ngSubmit)="onSubmit()" class="needs-validation" novalidate>
  <div class="mb-3" *ngFor="let field of ['title', 'author', 'isbn', 'price', 'publishedDate', 'description']">
    <label [for]="field" class="form-label">{{ field | titlecase }}</label>
    
    <ng-container [ngSwitch]="field">
      <input [required]="true"
        *ngSwitchCase="'price'"
        type="number"
        step="0.01"
        min="0"
        class="form-control"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      />

      <input
        *ngSwitchCase="'publishedDate'"
        type="date"
        class="form-control"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      />

      <textarea
        *ngSwitchCase="'description'"
        class="form-control"
        rows="3"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      ></textarea>

      <input required="true"
        *ngSwitchDefault
        type="text"
        class="form-control"
        [class.is-invalid]="isInvalid(field)"
        [id]="field"
        [formControlName]="field"
      />
    </ng-container>

    <div class="invalid-feedback">
      {{ field | titlecase }} is required and must be valid.
    </div>
  </div>

  <button type="submit" [disabled]="!bookForm.valid" class="btn btn-primary">Submit</button>
</form>
